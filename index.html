<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏£‡∏ñ EV</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    input, select, textarea { width: 100%; margin-bottom: 10px; padding: 8px; }
    button { padding: 10px 15px; }
    .entry { border-bottom: 1px solid #ccc; margin-bottom: 10px; padding-bottom: 10px; }
  </style>
</head>
<body>
  <h2>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏£‡∏ñ EV</h2>
  <form id="chargeForm">
    <label>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≤‡∏£‡πå‡∏à</label>
    <input type="date" id="date" required>

    <label>üîå ‡πÅ‡∏≠‡∏õ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ä‡∏≤‡∏£‡πå‡∏à</label>
<select id="chargeApp" required>
  <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏≠‡∏õ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ä‡∏≤‡∏£‡πå‡∏à --</option>
  <option>Altervim</option>
  <option>EA Anywhere</option>
  <option>EleXA</option>
  <option>EVolt</option>
  <option>MEAEV</option>
  <option>MG i-SMART</option>
  <option>ONION</option>
  <option>PEA VOLTA</option>
  <option>PTT EV Station PluZ</option>
  <option>REVER SHARGE</option>
  <option>Shell Recharge</option>
  <option>Spark</option>
  <option>THAI EV Charger</option>
  <option>ZEV Station</option>
</select>

    <label>üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ä‡∏≤‡∏£‡πå‡∏à</label>
    <input type="text" id="location" required>
    <label for="locationName">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á:</label>
<input type="text" id="locationName" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà">

<button type="button" onclick="getLocation()">‡πÅ‡∏ô‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>

<label for="gpsLocation">‡∏û‡∏¥‡∏Å‡∏±‡∏î GPS (‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î, ‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î):</label>
<input type="text" id="gpsLocation" placeholder="‡πÄ‡∏ä‡πà‡∏ô 13.7563, 100.5018" readonly>

<script>
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        const lat = position.coords.latitude.toFixed(6);
        const lon = position.coords.longitude.toFixed(6);
        document.getElementById('gpsLocation').value = `${lat}, ${lon}`;
        alert('‡πÅ‡∏ô‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢: ' + lat + ', ' + lon);
      }, function(error) {
        alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÑ‡∏î‡πâ: ' + error.message);
      });
    } else {
      alert('‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á');
    }
  }
</script>

    <label>üó∫Ô∏è ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label>
    <input type="text" id="province" required>
    <label for="province">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
<select id="province">
  <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î --</option>
  <option>‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</option>
  <option>‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà</option>
  <option>‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏Å‡∏≤‡∏¨‡∏™‡∏¥‡∏ô‡∏ò‡∏∏‡πå</option>
  <option>‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£</option>
  <option>‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô</option>
  <option>‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏â‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏£‡∏≤</option>
  <option>‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó</option>
  <option>‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥</option>
  <option>‡∏ä‡∏∏‡∏°‡∏û‡∏£</option>
  <option>‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢</option>
  <option>‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</option>
  <option>‡∏ï‡∏£‡∏±‡∏á</option>
  <option>‡∏ï‡∏£‡∏≤‡∏î</option>
  <option>‡∏ï‡∏≤‡∏Å</option>
  <option>‡∏ô‡∏Ñ‡∏£‡∏ô‡∏≤‡∏¢‡∏Å</option>
  <option>‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°</option>
  <option>‡∏ô‡∏Ñ‡∏£‡∏û‡∏ô‡∏°</option>
  <option>‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤</option>
  <option>‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä</option>
  <option>‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå</option>
  <option>‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™</option>
  <option>‡∏ô‡πà‡∏≤‡∏ô</option>
  <option>‡∏ö‡∏∂‡∏á‡∏Å‡∏≤‡∏¨</option>
  <option>‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏°‡∏¢‡πå</option>
  <option>‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ</option>
  <option>‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå</option>
  <option>‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ</option>
  <option>‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤</option>
  <option>‡∏û‡∏∞‡πÄ‡∏¢‡∏≤</option>
  <option>‡∏û‡∏±‡∏á‡∏á‡∏≤</option>
  <option>‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á</option>
  <option>‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£</option>
  <option>‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å</option>
  <option>‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå</option>
  <option>‡πÅ‡∏û‡∏£‡πà</option>
  <option>‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï</option>
  <option>‡∏°‡∏´‡∏≤‡∏™‡∏≤‡∏£‡∏Ñ‡∏≤‡∏°</option>
  <option>‡∏°‡∏∏‡∏Å‡∏î‡∏≤‡∏´‡∏≤‡∏£</option>
  <option>‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô</option>
  <option>‡∏¢‡∏∞‡∏•‡∏≤</option>
  <option>‡∏¢‡πÇ‡∏™‡∏ò‡∏£</option>
  <option>‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î</option>
  <option>‡∏£‡∏∞‡∏ô‡∏≠‡∏á</option>
  <option>‡∏£‡∏∞‡∏¢‡∏≠‡∏á</option>
  <option>‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏•‡∏≥‡∏õ‡∏≤‡∏á</option>
  <option>‡∏•‡∏≥‡∏û‡∏π‡∏ô</option>
  <option>‡πÄ‡∏•‡∏¢</option>
  <option>‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©</option>
  <option>‡∏™‡∏Å‡∏•‡∏ô‡∏Ñ‡∏£</option>
  <option>‡∏™‡∏á‡∏Ç‡∏•‡∏≤</option>
  <option>‡∏™‡∏ï‡∏π‡∏•</option>
  <option>‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£</option>
  <option>‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°</option>
  <option>‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£</option>
  <option>‡∏™‡∏£‡∏∞‡πÅ‡∏Å‡πâ‡∏ß</option>
  <option>‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏™‡∏¥‡∏á‡∏´‡πå‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢</option>
  <option>‡∏™‡∏∏‡∏û‡∏£‡∏£‡∏ì‡∏ö‡∏∏‡∏£‡∏µ</option>
  <option>‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ</option>
  <option>‡∏™‡∏∏‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå</option>
  <option>‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢</option>
  <option>‡∏´‡∏ô‡∏≠‡∏á‡∏ö‡∏±‡∏ß‡∏•‡∏≥‡∏†‡∏π</option>
  <option>‡∏≠‡πà‡∏≤‡∏á‡∏ó‡∏≠‡∏á</option>
  <option>‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç</option>
  <option>‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ</option>
  <option>‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå</option>
  <option>‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ</option>
  <option>‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ</option>
</select>

<button type="button" onclick="fillProvinceFromGPS()">‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>

    <label>üöó ‡πÄ‡∏•‡∏Ç‡πÑ‡∏°‡∏•‡πå</label>
    <input type="number" id="odometer" required>

    <label>‚ö° ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö (kWh)</label>
    <input type="number" id="kwh" step="0.01" required>

    <label>üí∏ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡∏ö‡∏≤‡∏ó/kWh)</label>
    <input type="number" id="price" step="0.01" required>

    <label>‚öôÔ∏è ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ä‡∏≤‡∏£‡πå‡∏à</label>
    <select id="chargeType">
      <option value="AC">AC</option>
      <option value="DC">DC Fast</option>
      <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
    </select>

    <label>üí≥ ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</label>
    <select id="payment">
      <option value="PromptPay">PromptPay</option>
      <option value="‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï">‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï</option>
      <option value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</option>
      <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
    </select>

    <label>üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
    <textarea id="note" rows="2"></textarea>

    <button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
  </form>

  <h3>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</h3>
  <div id="logList"></div>

  <script>
    const form = document.getElementById('chargeForm');
    const logList = document.getElementById('logList');

    function loadLogs() {
      const logs = JSON.parse(localStorage.getItem('evLogs')) || [];
      logList.innerHTML = '';
      logs.reverse().forEach(log => {
        const div = document.createElement('div');
        div.className = 'entry';
        div.innerHTML = `
          <strong>${log.date}</strong> | ${log.app} | ${log.location}, ${log.province}<br>
          ‡πÄ‡∏•‡∏Ç‡πÑ‡∏°‡∏•‡πå: ${log.odometer} km<br>
          ‡∏ä‡∏≤‡∏£‡πå‡∏à ${log.kwh} kWh √ó ${log.price} ‡∏ö‡∏≤‡∏ó = <strong>${log.total} ‡∏ö‡∏≤‡∏ó</strong><br>
          ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${log.chargeType} | ‡∏à‡πà‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢: ${log.payment}<br>
          ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${log.note || '-'}
        `;
        logList.appendChild(div);
      });
    }

    form.onsubmit = (e) => {
      e.preventDefault();
      const log = {
        date: document.getElementById('date').value,
        app: document.getElementById('app').value,
        location: document.getElementById('location').value,
        province: document.getElementById('province').value,
        odometer: parseFloat(document.getElementById('odometer').value),
        kwh: parseFloat(document.getElementById('kwh').value),
        price: parseFloat(document.getElementById('price').value),
        total: parseFloat((document.getElementById('kwh').value * document.getElementById('price').value).toFixed(2)),
        chargeType: document.getElementById('chargeType').value,
        payment: document.getElementById('payment').value,
        note: document.getElementById('note').value,
      };

      const logs = JSON.parse(localStorage.getItem('evLogs')) || [];
      logs.push(log);
      localStorage.setItem('evLogs', JSON.stringify(logs));
      form.reset();
      loadLogs();
    };

    window.onload = loadLogs;
  </script>

  <script>
  function fillProvinceFromGPS() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;

        fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`, {
          headers: {
            'User-Agent': 'ev-log-demo (https://github.com/piiisom/ev-log)',
            'Referer': location.href
          }
        })
        .then(response => response.json())
        .then(data => {
          const province = data.address.state || data.address.county || '';
          const dropdown = document.getElementById('province');
          for (let i = 0; i < dropdown.options.length; i++) {
            if (province.includes(dropdown.options[i].text)) {
              dropdown.selectedIndex = i;
              alert("‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + dropdown.options[i].text);
              return;
            }
          }
          alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö: " + province);
        })
        .catch(error => alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error));
      }, function(error) {
        alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ: " + error.message);
      });
    } else {
      alert("‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á");
    }
  }
</script>
</body>
</html>
